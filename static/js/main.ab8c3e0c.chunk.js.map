{"version":3,"sources":["components/AppBar/Component.js","components/DebugDetails/Component.js","components/slate/utilities.js","components/slate/marks.js","components/Button/Component.js","components/ContentCreator/Component.js","components/App/Component.js","index.js"],"names":["AppBar","_ref","projectTitle","action","react_default","a","createElement","className","packageJson","version","onClick","DebugDetails","state","JSON","stringify","MarkHotkey","options","type","key","onKeyDown","event","editor","next","ctrlKey","preventDefault","toggleMark","CodeMark","children","BoldMark","_ref2","ItalicMark","_ref3","UnderlineMark","_ref4","StrikethroughMark","_ref5","Button","classes","label","disabled","value","concat","ContentCreator","editors","id","shortId","generate","Value","fromJSON","initialValue","handleAddingEditor","e","_this","setState","prevState","Object","toConsumableArray","handleRemovingEditor","editorId","target","alert","filter","handleChange","props","mappedEditors","map","objectSpread","contentChange","handleKeyDown","isCode","blocks","some","block","setBlocks","renderMark","mark","marks_CodeMark","marks_BoldMark","marks_ItalicMark","marks_UnderlineMark","marks_StrikethroughMark","onDragStart","index","draggedItem","dataTransfer","effectAllowed","setData","parentNode","setDragImage","onDragOver","draggedOverItem","item","splice","_this2","this","inDebug","Fragment","components_Button_Component","idx","draggable","onDragEnd","slate_react_es","plugins","placeholder","onChange","change","React","Component","App","editorsState","components_ContentCreator_Component","fields","components_DebugDetails_Component","components_AppBar_Component","ReactDOM","render","App_Component","document","getElementById"],"mappings":"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","file":"static/js/main.ab8c3e0c.chunk.js","sourcesContent":["import React from \"react\";\nimport packageJson from \"../../../package.json\";\n\nconst AppBar = ({ projectTitle, action }) => (\n  <div className=\"appBar\">\n    <code>\n      <strong>Prototype: </strong>\n      {projectTitle}\n    </code>\n    <div>\n      <code>\n        <strong>Version:</strong> {packageJson.version}\n      </code>\n      <button className=\"btn debugBtn\" onClick={action}>\n        Debug\n      </button>\n    </div>\n  </div>\n);\n\nexport default AppBar;\n","import React from \"react\";\n\nconst DebugDetails = ({ state }) => (\n  <div className=\"detailsComponent\">\n    <h2>Application state</h2>\n    <pre>\n      <code>{JSON.stringify(state, null, 2)}</code>\n    </pre>\n  </div>\n);\n\nexport default DebugDetails;\n","export const MarkHotkey = (options) => {\n  const { type, key } = options;\n\n  // Return our \"plugin\" object, container the `onKeyDown` handler.\n  return {\n    onKeyDown(event, editor, next) {\n      // If it doesn't match our `key`, let other plugins handle it.\n      if (!event.ctrlKey || event.key !== key) return next();\n\n      // Prevent the default chars from being inserted.\n      event.preventDefault();\n\n      // Toggle the mark `type`.\n      editor.toggleMark(type);\n    },\n  };\n};\n","import React from \"react\";\n\nexport const CodeMark = ({ children }) => <code>{children}</code>;\nexport const BoldMark = ({ children }) => <strong>{children}</strong>;\nexport const ItalicMark = ({ children }) => <em>{children}</em>;\nexport const UnderlineMark = ({ children }) => <u>{children}</u>;\nexport const StrikethroughMark = ({ children }) => <del>{children}</del>;\n","import React from \"react\";\n\nconst Button = ({ classes, action, label, disabled, value }) => (\n  <button className={`btn ${classes}`} onClick={action} disabled={disabled} value={value}>\n    {label}\n  </button>\n);\n\nexport default Button;\n","import React from \"react\";\nimport { Editor } from \"slate-react\";\nimport { Value } from \"slate\";\nimport shortId from \"shortid\";\nimport initialValue from \"../slate/initial-value.json\";\nimport { MarkHotkey } from \"../slate/utilities\";\nimport { CodeMark, BoldMark, ItalicMark, UnderlineMark, StrikethroughMark } from \"../slate/marks\";\nimport Button from \"../Button\";\n\nclass ContentCreator extends React.Component {\n  state = {\n    editors: [\n      {\n        id: shortId.generate(),\n        value: Value.fromJSON(initialValue),\n      },\n    ],\n  };\n\n  render() {\n    const { inDebug } = this.props;\n\n    return (\n      <React.Fragment>\n        <Button label=\"Add unit\" classes=\"addEditorBtn mb-2\" action={this.handleAddingEditor} />\n        <div className=\"editorsContainer\">\n          {this.state.editors.map((editor, idx) => (\n            <div\n              className=\"editorContainer\"\n              key={editor.id}\n              onDragOver={() => this.onDragOver(idx)}>\n              <div\n                className=\"editorDragHandle\"\n                draggable={true}\n                onDragStart={(e) => this.onDragStart(e, idx)}\n                onDragEnd={this.onDragEnd}\n              />\n              <div className=\"editorInternal\">\n                <Editor\n                  value={editor.value}\n                  plugins={[\n                    MarkHotkey({ type: \"bold\", key: \"b\" }),\n                    MarkHotkey({ type: \"italic\", key: \"i\" }),\n                    MarkHotkey({ type: \"underline\", key: \"u\" }),\n                    MarkHotkey({ type: \"strikethrough\", key: \"s\" }),\n                    MarkHotkey({ type: \"code\", key: \"`\" }),\n                  ]}\n                  placeholder={\"Type something...\"}\n                  onChange={(change, id) => this.handleChange(change, editor.id)}\n                  renderMark={this.renderMark}\n                />\n\n                <div className=\"editorContainerMeta flex\">\n                  <div>{inDebug && <code>editor id: {editor.id}</code>}</div>\n                  <div className=\"editorContainerMetaActions\">\n                    <Button\n                      label=\"Add unit\"\n                      classes=\"addEditorBtn metaEditorBtn\"\n                      action={() => alert(`Nested editors will be wired up soon!`)}\n                      disabled\n                    />\n                    <Button\n                      label=\"Remove unit\"\n                      classes=\"removeEditorBtn metaEditorBtn\"\n                      action={this.handleRemovingEditor}\n                      value={editor.id}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  handleAddingEditor = (e) => {\n    e.preventDefault();\n    this.setState((prevState) => ({\n      editors: [\n        ...prevState.editors,\n        {\n          id: shortId.generate(),\n          value: Value.fromJSON(initialValue),\n        },\n      ],\n    }));\n  };\n\n  handleRemovingEditor = (e) => {\n    e.preventDefault();\n    const { editors } = this.state;\n    const editorId = e.target.value;\n    alert(`Are you sure you want to remove editor ${editorId}?`);\n    this.setState({\n      editors: editors.filter((editor) => editor.id !== editorId),\n    });\n  };\n\n  handleChange = (props, id) => {\n    const mappedEditors = this.state.editors.map((editor) => {\n      if (editor.id === id) {\n        editor = { ...editor, value: props.value };\n      }\n      return editor;\n    });\n\n    this.setState({\n      editors: mappedEditors,\n    });\n\n    this.props.contentChange(this.state.editors);\n  };\n\n  handleKeyDown = (event, editor, next) => {\n    if (!event.ctrlKey) return next();\n    switch (event.key) {\n      case \"b\": {\n        event.preventDefault();\n        editor.toggleMark(\"bold\");\n        break;\n      }\n      case \"i\": {\n        event.preventDefault();\n        editor.toggleMark(\"italic\");\n        break;\n      }\n      case \"`\": {\n        const isCode = editor.value.blocks.some((block) => block.type === \"code\");\n        event.preventDefault();\n        editor.setBlocks(isCode ? \"paragraph\" : \"code\");\n        break;\n      }\n      default: {\n        return next();\n      }\n    }\n  };\n\n  renderMark = (props, editor, next) => {\n    switch (props.mark.type) {\n      case \"code\":\n        return <CodeMark {...props} />;\n      case \"bold\":\n        return <BoldMark {...props} />;\n      case \"italic\":\n        return <ItalicMark {...props} />;\n      case \"underline\":\n        return <UnderlineMark {...props} />;\n      case \"strikethrough\":\n        return <StrikethroughMark {...props} />;\n      default:\n        return next();\n    }\n  };\n\n  onDragStart = (e, index) => {\n    this.draggedItem = this.state.editors[index];\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/html\", e.target.parentNode);\n    e.dataTransfer.setDragImage(e.target.parentNode, 20, 20);\n  };\n\n  onDragOver = (index) => {\n    const draggedOverItem = this.state.editors[index];\n    if (this.draggedItem === draggedOverItem) return;\n    let editors = this.state.editors.filter((item) => item !== this.draggedItem);\n    editors.splice(index, 0, this.draggedItem);\n    this.setState({ editors });\n  };\n}\n\nexport default ContentCreator;\n","import React from \"react\";\nimport AppBar from \"../AppBar\";\nimport DebugDetails from \"../DebugDetails\";\nimport ContentCreator from \"../ContentCreator\";\n\nclass App extends React.Component {\n  state = {\n    inDebug: false,\n    editorsState: [],\n  };\n\n  render() {\n    const { inDebug } = this.state;\n\n    return (\n      <div className=\"app\">\n        <div className=\"container\">\n          <ContentCreator\n            inDebug={inDebug}\n            contentChange={(fields) => this.contentChange(fields)}\n          />\n          {inDebug && <DebugDetails state={this.state} />}\n        </div>\n\n        <AppBar\n          projectTitle=\"Testing unit creation\"\n          action={() => this.setState({ inDebug: !inDebug })}\n        />\n      </div>\n    );\n  }\n\n  contentChange = (editorsState) => {\n    this.setState({ editorsState });\n  };\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}